
Building X4O

Software requirements;
- JDK 1.5++
- Maven 3.0.1++ (3.0.3++ for jdk5)


-- Create package --

cd project-root/;
mvn clean package;


-- Install local package --

cd project-root/;
mvn clean install;


-- Update schemas in src --
-- note; rm after auto schema creation

cd project-root/;
mvn clean install;
mvn -Pant-update-schema-cel package;
mvn -Pant-update-schema-eld package;
- Add the license as manual step in xsd files. (todo in ant task)

note: the do 'install' is because of circle plugins.


-- Run multi jvm test --

Run tests in all jvms;
src/main/build/jvm-test.sh

Run tests in single jvm;
src/main/build/jvm-test.sh /usr/lib/jvm/jdk1.5.0_22/


-- Make release build --

# todo make work
cd project-root/;
mvn clean package;
mvn -B -Dusername=<scm_username> clean install release:clean release:prepare release:perform;
src/main/build/gnu-up.sh <scm_username> <version>


-- Make site --

cd project-root/;
MAVEN_OPTS="-Xmx512m -XX:MaxPermSize=128m" mvn -Pbuild-site-x4o-support clean package site site:stage


-- Check for code style --

cd project-root/;
mvn checkstyle:checkstyle


-- Check for licenses --

cd project-root/;
mvn -Pcheck-license license:check

To update all files from check output;
mvn -Pcheck-license license:format

-- Check for versions-updates --

cd project-root/;
mvn versions:display-plugin-updates;
mvn versions:display-dependency-updates;


-- Run x4o-plugin-maven from cmd --

cd project-root/;
mvn clean install;
mvn org.x4o.plugin:x4o-plugin-maven:help
mvn org.x4o.plugin:x4o-plugin-maven:write-language-doc -DoutputDirectory=/tmp/doc1 
mvn org.x4o.plugin:x4o-plugin-maven:write-language-doc -DoutputDirectory=/tmp/doc2 -Dlanguages={eld=ALL,swixml=1.0-2.0} -Dverbose=true
